<div id="page-wrapper" ng-controller="petCaoController">
	<div class="row">
		<div class="col-lg-12">
			<h1 class="page-header">Cachorro</h1>
		</div>
		<!-- /.col-lg-12 -->
	</div>
	<!-- Nav tabs -->
	<ul class="nav nav-tabs">
		<li><a href="#cadastro" data-toggle="tab">Cadastro</a></li>
		<li class="active"><a href="#lista" data-toggle="tab" ng-click="findAllCachorro()">Lista</a></li>
	</ul>
	<!-- / Nav tabs -->
	<div class="tab-content" id="idTabPet">
		<div class="tab-pane fade" id="cadastro">
			<div class="row">
				<form role="form" name="formPet" novalidate>
					<uib-alert ng-repeat="alert in alerts" type="{{alert.type}}" close="closeAlert($index)">{{alert.msg}}</uib-alert>
					<!-- /.row -->
					<div class="col-lg-12">
						<div class="panel panel-default">
							<div class="panel-heading">Dados do cachorro</div>							
							<div class="panel-body">
								<div class="col-lg-4">
									<div class="form-group">
										<label ng-class="{'control-label': formPet.raca.$dirty && formPet.raca.$invalid}">Proprietário:</label>
										<input type="text" ng-model="cachorro.cliente" placeholder="Nome do proprietário"
											uib-typeahead="cliente as cliente.nome for cliente in findCliente($viewValue)" typeahead-loading="loadingClientes"
											typeahead-no-results="semResultado" class="form-control" typeahead-min-length=3> <i ng-show="loadingClientes"
											class="glyphicon glyphicon-refresh"></i>
										<div ng-show="semResultado">
											<i class="glyphicon glyphicon-remove"></i> Sem resultado.
										</div>
									</div>
								</div>
								<div class="col-lg-4">
									<div class="form-group" ng-class="{'has-error': formPet.raca.$dirty && formPet.raca.$invalid}">
										<label ng-class="{'control-label': formPet.raca.$dirty && formPet.raca.$invalid}">Raça:</label>
										<input type="text" ng-model="cachorro.raca" placeholder="Raça"
											uib-typeahead="raca as raca.nome for raca in racas | filter:{nome:$viewValue} | limitTo:8" class="form-control">

									</div>
								</div>
								<div class="col-lg-4">
									<div class="form-group" ng-class="{'has-error': formPet.nome.$dirty && formPet.nome.$invalid}">
										<label ng-class="{'control-label': formPet.nome.$dirty && formPet.nome.$invalid}">nome:</label>
										<input class="form-control" type="text" placeholder="nome" name="nome" ng-model="cachorro.nome" ng-minlength=3 ng-maxlength=100 required />
										<div class="alert alert-danger" ng-show="formPet.nome.$dirty && formPet.nome.$invalid">
											<small ng-show="formPet.nome.$error.required"> Informe o nome. </small>
											<small ng-show="formPet.nome.$error.minlength"> O nome dever� ter mais que três letras. </small>
											<small ng-show="formPet.nome.$error.maxlength"> O nome n�o poder� ter mais que cem letras. </small>
										</div>

									</div>
								</div>
								<div class="col-lg-4">
									<div class="form-group" ng-class="{'has-error': formPet.dtNacimento.$dirty && formPet.dtNacimento.$invalid}">
										<label ng-class="{'control-label': formPet.dtNacimento.$dirty && formPet.dtNacimento.$invalid}">Data Nacimento:</label>
										<input class="form-control" type="date" name="dtNacimento" ng-model="cachorro.dtNacimento" required />
										<div class="alert alert-danger" ng-show="formPet.dtNacimento.$dirty && formPet.dtNacimento.$invalid">
											<small ng-show="formPet.dtNacimento.$error"> A data de nacimento � invalida. </small>
										</div>
									</div>
								</div>
								<!-- /.row (nested) -->
							</div>
							<!-- /.panel-body -->
						</div>
						<!-- /.panel -->
					</div>
					<!-- /.col-lg-12 -->
					<div class="row">
						<button type="submit" class="btn btn-default" ng-click="salvar(cachorro)">Salvar</button>
					</div>
				</form>
			</div>
		</div>

		<div class="tab-pane fade in active" id="lista">
			<div class="row">
				<div class="col-md-12">
					<form class="form-inline well well-sm">
						<span class="fa fa-search"></span>
						<div class="form-group">
							<input type="text" class="form-control" id="search" ng-model="search" placeholder="Pesquisar..." />
						</div>
					</form>
				</div>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">Lista de Cachorros</div>
						teste:{{selectedCachorro}}
						<!-- /.panel-heading -->
						<div class="panel-body">
							<div class="dataTable_wrapper">
								<table class="table table-striped table-bordered table-hover" id="dataTables-example">
									<thead>
										<tr>
											<th>#</th>
											<th ng-click="order = '-nome'; tipoOrderAsc=false;" ng-show="tipoOrderAsc">Nome <span class="fa  fa-sort-up"></span></th>
											<th ng-click="order = 'nome'; tipoOrderAsc=true;" ng-show="!tipoOrderAsc">Nome <span class="fa fa-sort-desc"></span></th>
											<th ng-click="order = '-dtNacimento'; tipoOrderAsc=false;" ng-show="tipoOrderAsc">Data Nacimento <span class="fa  fa-sort-up"></span></th>
											<th ng-click="order = 'dtNacimento'; tipoOrderAsc=true;" ng-show="!tipoOrderAsc">Data Nacimento <span class="fa fa-sort-desc"></span></th>
											<th ng-click="order = '-cliente.nome'; tipoOrderAsc=false;" ng-show="tipoOrderAsc">Cliente <span class="fa  fa-sort-up"></span></th>
											<th ng-click="order = 'cliente.nome'; tipoOrderAsc=true;" ng-show="!tipoOrderAsc">Cliente <span class="fa fa-sort-desc"></span></th>
											<th ng-click="order = '-raca.nome'; tipoOrderAsc=false;" ng-show="tipoOrderAsc">Raça <span class="fa  fa-sort-up"></span></th>
											<th ng-click="order = 'raca.nome'; tipoOrderAsc=true;" ng-show="!tipoOrderAsc">Raça <span class="fa fa-sort-desc"></span></th>
										</tr>
									</thead>
									<tbody>
										<tr ng-repeat="cachorro in cachorrosFiltrados = (cachorros | filter:sensitiveSearch | filter:figureOutTodosToDisplay |  orderBy:order)"
											ng-click="setCachorro(cachorro, $index)">
											<td>{{ cachorro.id }}</td>
											<td>{{ cachorro.nome }}</td>
											<td>{{ cachorro.dtNacimento | date:"longDate" }}</td>
											<td>{{ cachorro.cliente.nome}}</td>
											<td>{{ cachorro.raca.nome}}</td>
										</tr>
										<tr ng-show="cachorrosFiltrados == 0">
											<td colspan="4">
												<div class="alert alert-info">
													<p class="text-center">Nenhum cachorro para o filtro aplicado '{{ search }}'</p>
												</div>
											</td>
										</tr>
									</tbody>
								</table>
								<div class="col-md-6 col-md-offset-4" ng-show="clientesFiltrados != 0">
									<uib-pagination boundary-links="true" total-items="cachorros.length" ng-model="currentPage" items-per-page="itemsPerPage"
										class="pagination-sm" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>
								</div>
							</div>
						</div>
						<!-- /.panel-body -->
					</div>
					<!-- /.panel -->
				</div>
				<!-- /.col-lg-12 -->
			</div>
			<!-- /.row -->
		</div>
	</div>

</div>
<!-- /#page-wrapper -->
